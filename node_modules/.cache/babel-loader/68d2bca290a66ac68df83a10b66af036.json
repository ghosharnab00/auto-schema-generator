{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compileGeneralSelector = void 0;\n\nvar attributes_1 = require(\"./attributes\");\n\nvar pseudo_selectors_1 = require(\"./pseudo-selectors\");\n\nvar css_what_1 = require(\"css-what\");\n/*\n * All available rules\n */\n\n\nfunction compileGeneralSelector(next, selector, options, context, compileToken) {\n  var adapter = options.adapter,\n      equals = options.equals;\n\n  switch (selector.type) {\n    case css_what_1.SelectorType.PseudoElement:\n      {\n        throw new Error(\"Pseudo-elements are not supported by css-select\");\n      }\n\n    case css_what_1.SelectorType.ColumnCombinator:\n      {\n        throw new Error(\"Column combinators are not yet supported by css-select\");\n      }\n\n    case css_what_1.SelectorType.Attribute:\n      {\n        if (selector.namespace != null) {\n          throw new Error(\"Namespaced attributes are not yet supported by css-select\");\n        }\n\n        if (!options.xmlMode || options.lowerCaseAttributeNames) {\n          selector.name = selector.name.toLowerCase();\n        }\n\n        return attributes_1.attributeRules[selector.action](next, selector, options);\n      }\n\n    case css_what_1.SelectorType.Pseudo:\n      {\n        return (0, pseudo_selectors_1.compilePseudoSelector)(next, selector, options, context, compileToken);\n      }\n    // Tags\n\n    case css_what_1.SelectorType.Tag:\n      {\n        if (selector.namespace != null) {\n          throw new Error(\"Namespaced tag names are not yet supported by css-select\");\n        }\n\n        var name_1 = selector.name;\n\n        if (!options.xmlMode || options.lowerCaseTags) {\n          name_1 = name_1.toLowerCase();\n        }\n\n        return function tag(elem) {\n          return adapter.getName(elem) === name_1 && next(elem);\n        };\n      }\n    // Traversal\n\n    case css_what_1.SelectorType.Descendant:\n      {\n        if (options.cacheResults === false || typeof WeakSet === \"undefined\") {\n          return function descendant(elem) {\n            var current = elem;\n\n            while (current = adapter.getParent(current)) {\n              if (adapter.isTag(current) && next(current)) {\n                return true;\n              }\n            }\n\n            return false;\n          };\n        } // @ts-expect-error `ElementNode` is not extending object\n\n\n        var isFalseCache_1 = new WeakSet();\n        return function cachedDescendant(elem) {\n          var current = elem;\n\n          while (current = adapter.getParent(current)) {\n            if (!isFalseCache_1.has(current)) {\n              if (adapter.isTag(current) && next(current)) {\n                return true;\n              }\n\n              isFalseCache_1.add(current);\n            }\n          }\n\n          return false;\n        };\n      }\n\n    case \"_flexibleDescendant\":\n      {\n        // Include element itself, only used while querying an array\n        return function flexibleDescendant(elem) {\n          var current = elem;\n\n          do {\n            if (adapter.isTag(current) && next(current)) return true;\n          } while (current = adapter.getParent(current));\n\n          return false;\n        };\n      }\n\n    case css_what_1.SelectorType.Parent:\n      {\n        return function parent(elem) {\n          return adapter.getChildren(elem).some(function (elem) {\n            return adapter.isTag(elem) && next(elem);\n          });\n        };\n      }\n\n    case css_what_1.SelectorType.Child:\n      {\n        return function child(elem) {\n          var parent = adapter.getParent(elem);\n          return parent != null && adapter.isTag(parent) && next(parent);\n        };\n      }\n\n    case css_what_1.SelectorType.Sibling:\n      {\n        return function sibling(elem) {\n          var siblings = adapter.getSiblings(elem);\n\n          for (var i = 0; i < siblings.length; i++) {\n            var currentSibling = siblings[i];\n            if (equals(elem, currentSibling)) break;\n\n            if (adapter.isTag(currentSibling) && next(currentSibling)) {\n              return true;\n            }\n          }\n\n          return false;\n        };\n      }\n\n    case css_what_1.SelectorType.Adjacent:\n      {\n        if (adapter.prevElementSibling) {\n          return function adjacent(elem) {\n            var previous = adapter.prevElementSibling(elem);\n            return previous != null && next(previous);\n          };\n        }\n\n        return function adjacent(elem) {\n          var siblings = adapter.getSiblings(elem);\n          var lastElement;\n\n          for (var i = 0; i < siblings.length; i++) {\n            var currentSibling = siblings[i];\n            if (equals(elem, currentSibling)) break;\n\n            if (adapter.isTag(currentSibling)) {\n              lastElement = currentSibling;\n            }\n          }\n\n          return !!lastElement && next(lastElement);\n        };\n      }\n\n    case css_what_1.SelectorType.Universal:\n      {\n        if (selector.namespace != null && selector.namespace !== \"*\") {\n          throw new Error(\"Namespaced universal selectors are not yet supported by css-select\");\n        }\n\n        return next;\n      }\n  }\n}\n\nexports.compileGeneralSelector = compileGeneralSelector;","map":{"version":3,"names":["Object","defineProperty","exports","value","compileGeneralSelector","attributes_1","require","pseudo_selectors_1","css_what_1","next","selector","options","context","compileToken","adapter","equals","type","SelectorType","PseudoElement","Error","ColumnCombinator","Attribute","namespace","xmlMode","lowerCaseAttributeNames","name","toLowerCase","attributeRules","action","Pseudo","compilePseudoSelector","Tag","name_1","lowerCaseTags","tag","elem","getName","Descendant","cacheResults","WeakSet","descendant","current","getParent","isTag","isFalseCache_1","cachedDescendant","has","add","flexibleDescendant","Parent","parent","getChildren","some","Child","child","Sibling","sibling","siblings","getSiblings","i","length","currentSibling","Adjacent","prevElementSibling","adjacent","previous","lastElement","Universal"],"sources":["/Users/ag/Documents/GitHub/auto-schema-generator/node_modules/css-select/lib/general.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compileGeneralSelector = void 0;\nvar attributes_1 = require(\"./attributes\");\nvar pseudo_selectors_1 = require(\"./pseudo-selectors\");\nvar css_what_1 = require(\"css-what\");\n/*\n * All available rules\n */\nfunction compileGeneralSelector(next, selector, options, context, compileToken) {\n    var adapter = options.adapter, equals = options.equals;\n    switch (selector.type) {\n        case css_what_1.SelectorType.PseudoElement: {\n            throw new Error(\"Pseudo-elements are not supported by css-select\");\n        }\n        case css_what_1.SelectorType.ColumnCombinator: {\n            throw new Error(\"Column combinators are not yet supported by css-select\");\n        }\n        case css_what_1.SelectorType.Attribute: {\n            if (selector.namespace != null) {\n                throw new Error(\"Namespaced attributes are not yet supported by css-select\");\n            }\n            if (!options.xmlMode || options.lowerCaseAttributeNames) {\n                selector.name = selector.name.toLowerCase();\n            }\n            return attributes_1.attributeRules[selector.action](next, selector, options);\n        }\n        case css_what_1.SelectorType.Pseudo: {\n            return (0, pseudo_selectors_1.compilePseudoSelector)(next, selector, options, context, compileToken);\n        }\n        // Tags\n        case css_what_1.SelectorType.Tag: {\n            if (selector.namespace != null) {\n                throw new Error(\"Namespaced tag names are not yet supported by css-select\");\n            }\n            var name_1 = selector.name;\n            if (!options.xmlMode || options.lowerCaseTags) {\n                name_1 = name_1.toLowerCase();\n            }\n            return function tag(elem) {\n                return adapter.getName(elem) === name_1 && next(elem);\n            };\n        }\n        // Traversal\n        case css_what_1.SelectorType.Descendant: {\n            if (options.cacheResults === false ||\n                typeof WeakSet === \"undefined\") {\n                return function descendant(elem) {\n                    var current = elem;\n                    while ((current = adapter.getParent(current))) {\n                        if (adapter.isTag(current) && next(current)) {\n                            return true;\n                        }\n                    }\n                    return false;\n                };\n            }\n            // @ts-expect-error `ElementNode` is not extending object\n            var isFalseCache_1 = new WeakSet();\n            return function cachedDescendant(elem) {\n                var current = elem;\n                while ((current = adapter.getParent(current))) {\n                    if (!isFalseCache_1.has(current)) {\n                        if (adapter.isTag(current) && next(current)) {\n                            return true;\n                        }\n                        isFalseCache_1.add(current);\n                    }\n                }\n                return false;\n            };\n        }\n        case \"_flexibleDescendant\": {\n            // Include element itself, only used while querying an array\n            return function flexibleDescendant(elem) {\n                var current = elem;\n                do {\n                    if (adapter.isTag(current) && next(current))\n                        return true;\n                } while ((current = adapter.getParent(current)));\n                return false;\n            };\n        }\n        case css_what_1.SelectorType.Parent: {\n            return function parent(elem) {\n                return adapter\n                    .getChildren(elem)\n                    .some(function (elem) { return adapter.isTag(elem) && next(elem); });\n            };\n        }\n        case css_what_1.SelectorType.Child: {\n            return function child(elem) {\n                var parent = adapter.getParent(elem);\n                return parent != null && adapter.isTag(parent) && next(parent);\n            };\n        }\n        case css_what_1.SelectorType.Sibling: {\n            return function sibling(elem) {\n                var siblings = adapter.getSiblings(elem);\n                for (var i = 0; i < siblings.length; i++) {\n                    var currentSibling = siblings[i];\n                    if (equals(elem, currentSibling))\n                        break;\n                    if (adapter.isTag(currentSibling) && next(currentSibling)) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n        }\n        case css_what_1.SelectorType.Adjacent: {\n            if (adapter.prevElementSibling) {\n                return function adjacent(elem) {\n                    var previous = adapter.prevElementSibling(elem);\n                    return previous != null && next(previous);\n                };\n            }\n            return function adjacent(elem) {\n                var siblings = adapter.getSiblings(elem);\n                var lastElement;\n                for (var i = 0; i < siblings.length; i++) {\n                    var currentSibling = siblings[i];\n                    if (equals(elem, currentSibling))\n                        break;\n                    if (adapter.isTag(currentSibling)) {\n                        lastElement = currentSibling;\n                    }\n                }\n                return !!lastElement && next(lastElement);\n            };\n        }\n        case css_what_1.SelectorType.Universal: {\n            if (selector.namespace != null && selector.namespace !== \"*\") {\n                throw new Error(\"Namespaced universal selectors are not yet supported by css-select\");\n            }\n            return next;\n        }\n    }\n}\nexports.compileGeneralSelector = compileGeneralSelector;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}