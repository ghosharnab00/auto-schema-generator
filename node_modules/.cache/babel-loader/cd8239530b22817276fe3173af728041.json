{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.select = exports.filter = exports.some = exports.is = exports.aliases = exports.pseudos = exports.filters = void 0;\n\nvar css_what_1 = require(\"css-what\");\n\nvar css_select_1 = require(\"css-select\");\n\nvar DomUtils = __importStar(require(\"domutils\"));\n\nvar helpers_1 = require(\"./helpers\");\n\nvar positionals_1 = require(\"./positionals\"); // Re-export pseudo extension points\n\n\nvar css_select_2 = require(\"css-select\");\n\nObject.defineProperty(exports, \"filters\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.filters;\n  }\n});\nObject.defineProperty(exports, \"pseudos\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.pseudos;\n  }\n});\nObject.defineProperty(exports, \"aliases\", {\n  enumerable: true,\n  get: function () {\n    return css_select_2.aliases;\n  }\n});\n/** Used to indicate a scope should be filtered. Might be ignored when filtering. */\n\nvar SCOPE_PSEUDO = {\n  type: css_what_1.SelectorType.Pseudo,\n  name: \"scope\",\n  data: null\n};\n/** Used for actually filtering for scope. */\n\nvar CUSTOM_SCOPE_PSEUDO = __assign({}, SCOPE_PSEUDO);\n\nvar UNIVERSAL_SELECTOR = {\n  type: css_what_1.SelectorType.Universal,\n  namespace: null\n};\n\nfunction is(element, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return some([element], selector, options);\n}\n\nexports.is = is;\n\nfunction some(elements, selector, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof selector === \"function\") return elements.some(selector);\n\n  var _a = (0, helpers_1.groupSelectors)((0, css_what_1.parse)(selector)),\n      plain = _a[0],\n      filtered = _a[1];\n\n  return plain.length > 0 && elements.some((0, css_select_1._compileToken)(plain, options)) || filtered.some(function (sel) {\n    return filterBySelector(sel, elements, options).length > 0;\n  });\n}\n\nexports.some = some;\n\nfunction filterByPosition(filter, elems, data, options) {\n  var num = typeof data === \"string\" ? parseInt(data, 10) : NaN;\n\n  switch (filter) {\n    case \"first\":\n    case \"lt\":\n      // Already done in `getLimit`\n      return elems;\n\n    case \"last\":\n      return elems.length > 0 ? [elems[elems.length - 1]] : elems;\n\n    case \"nth\":\n    case \"eq\":\n      return isFinite(num) && Math.abs(num) < elems.length ? [num < 0 ? elems[elems.length + num] : elems[num]] : [];\n\n    case \"gt\":\n      return isFinite(num) ? elems.slice(num + 1) : [];\n\n    case \"even\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 0;\n      });\n\n    case \"odd\":\n      return elems.filter(function (_, i) {\n        return i % 2 === 1;\n      });\n\n    case \"not\":\n      {\n        var filtered_1 = new Set(filterParsed(data, elems, options));\n        return elems.filter(function (e) {\n          return !filtered_1.has(e);\n        });\n      }\n  }\n}\n\nfunction filter(selector, elements, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  return filterParsed((0, css_what_1.parse)(selector), elements, options);\n}\n\nexports.filter = filter;\n/**\n * Filter a set of elements by a selector.\n *\n * Will return elements in the original order.\n *\n * @param selector Selector to filter by.\n * @param elements Elements to filter.\n * @param options Options for selector.\n */\n\nfunction filterParsed(selector, elements, options) {\n  if (elements.length === 0) return [];\n\n  var _a = (0, helpers_1.groupSelectors)(selector),\n      plainSelectors = _a[0],\n      filteredSelectors = _a[1];\n\n  var found;\n\n  if (plainSelectors.length) {\n    var filtered = filterElements(elements, plainSelectors, options); // If there are no filters, just return\n\n    if (filteredSelectors.length === 0) {\n      return filtered;\n    } // Otherwise, we have to do some filtering\n\n\n    if (filtered.length) {\n      found = new Set(filtered);\n    }\n  }\n\n  for (var i = 0; i < filteredSelectors.length && (found === null || found === void 0 ? void 0 : found.size) !== elements.length; i++) {\n    var filteredSelector = filteredSelectors[i];\n    var missing = found ? elements.filter(function (e) {\n      return DomUtils.isTag(e) && !found.has(e);\n    }) : elements;\n    if (missing.length === 0) break;\n    var filtered = filterBySelector(filteredSelector, elements, options);\n\n    if (filtered.length) {\n      if (!found) {\n        /*\n         * If we haven't found anything before the last selector,\n         * just return what we found now.\n         */\n        if (i === filteredSelectors.length - 1) {\n          return filtered;\n        }\n\n        found = new Set(filtered);\n      } else {\n        filtered.forEach(function (el) {\n          return found.add(el);\n        });\n      }\n    }\n  }\n\n  return typeof found !== \"undefined\" ? found.size === elements.length ? elements : // Filter elements to preserve order\n  elements.filter(function (el) {\n    return found.has(el);\n  }) : [];\n}\n\nfunction filterBySelector(selector, elements, options) {\n  var _a;\n\n  if (selector.some(css_what_1.isTraversal)) {\n    /*\n     * Get root node, run selector with the scope\n     * set to all of our nodes.\n     */\n    var root = (_a = options.root) !== null && _a !== void 0 ? _a : (0, helpers_1.getDocumentRoot)(elements[0]);\n\n    var sel = __spreadArray(__spreadArray([], selector, true), [CUSTOM_SCOPE_PSEUDO], false);\n\n    return findFilterElements(root, sel, options, true, elements);\n  } // Performance optimization: If we don't have to traverse, just filter set.\n\n\n  return findFilterElements(elements, selector, options, false);\n}\n\nfunction select(selector, root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  if (typeof selector === \"function\") {\n    return find(root, selector);\n  }\n\n  var _a = (0, helpers_1.groupSelectors)((0, css_what_1.parse)(selector)),\n      plain = _a[0],\n      filtered = _a[1];\n\n  var results = filtered.map(function (sel) {\n    return findFilterElements(root, sel, options, true);\n  }); // Plain selectors can be queried in a single go\n\n  if (plain.length) {\n    results.push(findElements(root, plain, options, Infinity));\n  }\n\n  if (results.length === 0) {\n    return [];\n  } // If there was only a single selector, just return the result\n\n\n  if (results.length === 1) {\n    return results[0];\n  } // Sort results, filtering for duplicates\n\n\n  return DomUtils.uniqueSort(results.reduce(function (a, b) {\n    return __spreadArray(__spreadArray([], a, true), b, true);\n  }));\n}\n\nexports.select = select; // Traversals that are treated differently in css-select.\n\nvar specialTraversal = new Set([css_what_1.SelectorType.Descendant, css_what_1.SelectorType.Adjacent]);\n\nfunction includesScopePseudo(t) {\n  return t !== SCOPE_PSEUDO && t.type === \"pseudo\" && (t.name === \"scope\" || Array.isArray(t.data) && t.data.some(function (data) {\n    return data.some(includesScopePseudo);\n  }));\n}\n\nfunction addContextIfScope(selector, options, scopeContext) {\n  return scopeContext && selector.some(includesScopePseudo) ? __assign(__assign({}, options), {\n    context: scopeContext\n  }) : options;\n}\n/**\n *\n * @param root Element(s) to search from.\n * @param selector Selector to look for.\n * @param options Options for querying.\n * @param queryForSelector Query multiple levels deep for the initial selector, even if it doesn't contain a traversal.\n * @param scopeContext Optional context for a :scope.\n */\n\n\nfunction findFilterElements(root, selector, options, queryForSelector, scopeContext) {\n  var filterIndex = selector.findIndex(positionals_1.isFilter);\n  var sub = selector.slice(0, filterIndex);\n  var filter = selector[filterIndex];\n  /*\n   * Set the number of elements to retrieve.\n   * Eg. for :first, we only have to get a single element.\n   */\n\n  var limit = (0, positionals_1.getLimit)(filter.name, filter.data);\n  if (limit === 0) return [];\n  var subOpts = addContextIfScope(sub, options, scopeContext);\n  /*\n   * Skip `findElements` call if our selector starts with a positional\n   * pseudo.\n   */\n\n  var elemsNoLimit = sub.length === 0 && !Array.isArray(root) ? DomUtils.getChildren(root).filter(DomUtils.isTag) : sub.length === 0 || sub.length === 1 && sub[0] === SCOPE_PSEUDO ? (Array.isArray(root) ? root : [root]).filter(DomUtils.isTag) : queryForSelector || sub.some(css_what_1.isTraversal) ? findElements(root, [sub], subOpts, limit) : filterElements(root, [sub], subOpts);\n  var elems = elemsNoLimit.slice(0, limit);\n  var result = filterByPosition(filter.name, elems, filter.data, options);\n\n  if (result.length === 0 || selector.length === filterIndex + 1) {\n    return result;\n  }\n\n  var remainingSelector = selector.slice(filterIndex + 1);\n  var remainingHasTraversal = remainingSelector.some(css_what_1.isTraversal);\n  var remainingOpts = addContextIfScope(remainingSelector, options, scopeContext);\n\n  if (remainingHasTraversal) {\n    /*\n     * Some types of traversals have special logic when they start a selector\n     * in css-select. If this is the case, add a universal selector in front of\n     * the selector to avoid this behavior.\n     */\n    if (specialTraversal.has(remainingSelector[0].type)) {\n      remainingSelector.unshift(UNIVERSAL_SELECTOR);\n    }\n    /*\n     * Add a scope token in front of the remaining selector,\n     * to make sure traversals don't match elements that aren't a\n     * part of the considered tree.\n     */\n\n\n    remainingSelector.unshift(SCOPE_PSEUDO);\n  }\n  /*\n   * If we have another filter, recursively call `findFilterElements`,\n   * with the `recursive` flag disabled. We only have to look for more\n   * elements when we see a traversal.\n   *\n   * Otherwise,\n   */\n\n\n  return remainingSelector.some(positionals_1.isFilter) ? findFilterElements(result, remainingSelector, options, false, scopeContext) : remainingHasTraversal ? // Query existing elements to resolve traversal.\n  findElements(result, [remainingSelector], remainingOpts, Infinity) : // If we don't have any more traversals, simply filter elements.\n  filterElements(result, [remainingSelector], remainingOpts);\n}\n\nfunction findElements(root, sel, options, limit) {\n  if (limit === 0) return [];\n  var query = (0, css_select_1._compileToken)(sel, options, root);\n  return find(root, query, limit);\n}\n\nfunction find(root, query, limit) {\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n\n  var elems = (0, css_select_1.prepareContext)(root, DomUtils, query.shouldTestNextSiblings);\n  return DomUtils.find(function (node) {\n    return DomUtils.isTag(node) && query(node);\n  }, elems, true, limit);\n}\n\nfunction filterElements(elements, sel, options) {\n  var els = (Array.isArray(elements) ? elements : [elements]).filter(DomUtils.isTag);\n  if (els.length === 0) return els;\n  var query = (0, css_select_1._compileToken)(sel, options);\n  return els.filter(query);\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","__spreadArray","to","from","pack","l","ar","Array","slice","concat","exports","select","filter","some","is","aliases","pseudos","filters","css_what_1","require","css_select_1","DomUtils","helpers_1","positionals_1","css_select_2","SCOPE_PSEUDO","type","SelectorType","Pseudo","name","data","CUSTOM_SCOPE_PSEUDO","UNIVERSAL_SELECTOR","Universal","namespace","element","selector","options","elements","_a","groupSelectors","parse","plain","filtered","_compileToken","sel","filterBySelector","filterByPosition","elems","num","parseInt","NaN","isFinite","Math","abs","_","filtered_1","Set","filterParsed","e","has","plainSelectors","filteredSelectors","found","filterElements","size","filteredSelector","missing","isTag","forEach","el","add","isTraversal","root","getDocumentRoot","findFilterElements","find","results","map","push","findElements","Infinity","uniqueSort","reduce","a","b","specialTraversal","Descendant","Adjacent","includesScopePseudo","isArray","addContextIfScope","scopeContext","context","queryForSelector","filterIndex","findIndex","isFilter","sub","limit","getLimit","subOpts","elemsNoLimit","getChildren","remainingSelector","remainingHasTraversal","remainingOpts","unshift","query","prepareContext","shouldTestNextSiblings","node","els"],"sources":["/Users/ag/Documents/GitHub/auto-schema-generator/node_modules/cheerio-select/lib/index.js"],"sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.select = exports.filter = exports.some = exports.is = exports.aliases = exports.pseudos = exports.filters = void 0;\nvar css_what_1 = require(\"css-what\");\nvar css_select_1 = require(\"css-select\");\nvar DomUtils = __importStar(require(\"domutils\"));\nvar helpers_1 = require(\"./helpers\");\nvar positionals_1 = require(\"./positionals\");\n// Re-export pseudo extension points\nvar css_select_2 = require(\"css-select\");\nObject.defineProperty(exports, \"filters\", { enumerable: true, get: function () { return css_select_2.filters; } });\nObject.defineProperty(exports, \"pseudos\", { enumerable: true, get: function () { return css_select_2.pseudos; } });\nObject.defineProperty(exports, \"aliases\", { enumerable: true, get: function () { return css_select_2.aliases; } });\n/** Used to indicate a scope should be filtered. Might be ignored when filtering. */\nvar SCOPE_PSEUDO = {\n    type: css_what_1.SelectorType.Pseudo,\n    name: \"scope\",\n    data: null,\n};\n/** Used for actually filtering for scope. */\nvar CUSTOM_SCOPE_PSEUDO = __assign({}, SCOPE_PSEUDO);\nvar UNIVERSAL_SELECTOR = {\n    type: css_what_1.SelectorType.Universal,\n    namespace: null,\n};\nfunction is(element, selector, options) {\n    if (options === void 0) { options = {}; }\n    return some([element], selector, options);\n}\nexports.is = is;\nfunction some(elements, selector, options) {\n    if (options === void 0) { options = {}; }\n    if (typeof selector === \"function\")\n        return elements.some(selector);\n    var _a = (0, helpers_1.groupSelectors)((0, css_what_1.parse)(selector)), plain = _a[0], filtered = _a[1];\n    return ((plain.length > 0 && elements.some((0, css_select_1._compileToken)(plain, options))) ||\n        filtered.some(function (sel) { return filterBySelector(sel, elements, options).length > 0; }));\n}\nexports.some = some;\nfunction filterByPosition(filter, elems, data, options) {\n    var num = typeof data === \"string\" ? parseInt(data, 10) : NaN;\n    switch (filter) {\n        case \"first\":\n        case \"lt\":\n            // Already done in `getLimit`\n            return elems;\n        case \"last\":\n            return elems.length > 0 ? [elems[elems.length - 1]] : elems;\n        case \"nth\":\n        case \"eq\":\n            return isFinite(num) && Math.abs(num) < elems.length\n                ? [num < 0 ? elems[elems.length + num] : elems[num]]\n                : [];\n        case \"gt\":\n            return isFinite(num) ? elems.slice(num + 1) : [];\n        case \"even\":\n            return elems.filter(function (_, i) { return i % 2 === 0; });\n        case \"odd\":\n            return elems.filter(function (_, i) { return i % 2 === 1; });\n        case \"not\": {\n            var filtered_1 = new Set(filterParsed(data, elems, options));\n            return elems.filter(function (e) { return !filtered_1.has(e); });\n        }\n    }\n}\nfunction filter(selector, elements, options) {\n    if (options === void 0) { options = {}; }\n    return filterParsed((0, css_what_1.parse)(selector), elements, options);\n}\nexports.filter = filter;\n/**\n * Filter a set of elements by a selector.\n *\n * Will return elements in the original order.\n *\n * @param selector Selector to filter by.\n * @param elements Elements to filter.\n * @param options Options for selector.\n */\nfunction filterParsed(selector, elements, options) {\n    if (elements.length === 0)\n        return [];\n    var _a = (0, helpers_1.groupSelectors)(selector), plainSelectors = _a[0], filteredSelectors = _a[1];\n    var found;\n    if (plainSelectors.length) {\n        var filtered = filterElements(elements, plainSelectors, options);\n        // If there are no filters, just return\n        if (filteredSelectors.length === 0) {\n            return filtered;\n        }\n        // Otherwise, we have to do some filtering\n        if (filtered.length) {\n            found = new Set(filtered);\n        }\n    }\n    for (var i = 0; i < filteredSelectors.length && (found === null || found === void 0 ? void 0 : found.size) !== elements.length; i++) {\n        var filteredSelector = filteredSelectors[i];\n        var missing = found\n            ? elements.filter(function (e) { return DomUtils.isTag(e) && !found.has(e); })\n            : elements;\n        if (missing.length === 0)\n            break;\n        var filtered = filterBySelector(filteredSelector, elements, options);\n        if (filtered.length) {\n            if (!found) {\n                /*\n                 * If we haven't found anything before the last selector,\n                 * just return what we found now.\n                 */\n                if (i === filteredSelectors.length - 1) {\n                    return filtered;\n                }\n                found = new Set(filtered);\n            }\n            else {\n                filtered.forEach(function (el) { return found.add(el); });\n            }\n        }\n    }\n    return typeof found !== \"undefined\"\n        ? (found.size === elements.length\n            ? elements\n            : // Filter elements to preserve order\n                elements.filter(function (el) {\n                    return found.has(el);\n                }))\n        : [];\n}\nfunction filterBySelector(selector, elements, options) {\n    var _a;\n    if (selector.some(css_what_1.isTraversal)) {\n        /*\n         * Get root node, run selector with the scope\n         * set to all of our nodes.\n         */\n        var root = (_a = options.root) !== null && _a !== void 0 ? _a : (0, helpers_1.getDocumentRoot)(elements[0]);\n        var sel = __spreadArray(__spreadArray([], selector, true), [CUSTOM_SCOPE_PSEUDO], false);\n        return findFilterElements(root, sel, options, true, elements);\n    }\n    // Performance optimization: If we don't have to traverse, just filter set.\n    return findFilterElements(elements, selector, options, false);\n}\nfunction select(selector, root, options) {\n    if (options === void 0) { options = {}; }\n    if (typeof selector === \"function\") {\n        return find(root, selector);\n    }\n    var _a = (0, helpers_1.groupSelectors)((0, css_what_1.parse)(selector)), plain = _a[0], filtered = _a[1];\n    var results = filtered.map(function (sel) {\n        return findFilterElements(root, sel, options, true);\n    });\n    // Plain selectors can be queried in a single go\n    if (plain.length) {\n        results.push(findElements(root, plain, options, Infinity));\n    }\n    if (results.length === 0) {\n        return [];\n    }\n    // If there was only a single selector, just return the result\n    if (results.length === 1) {\n        return results[0];\n    }\n    // Sort results, filtering for duplicates\n    return DomUtils.uniqueSort(results.reduce(function (a, b) { return __spreadArray(__spreadArray([], a, true), b, true); }));\n}\nexports.select = select;\n// Traversals that are treated differently in css-select.\nvar specialTraversal = new Set([\n    css_what_1.SelectorType.Descendant,\n    css_what_1.SelectorType.Adjacent,\n]);\nfunction includesScopePseudo(t) {\n    return (t !== SCOPE_PSEUDO &&\n        t.type === \"pseudo\" &&\n        (t.name === \"scope\" ||\n            (Array.isArray(t.data) &&\n                t.data.some(function (data) { return data.some(includesScopePseudo); }))));\n}\nfunction addContextIfScope(selector, options, scopeContext) {\n    return scopeContext && selector.some(includesScopePseudo)\n        ? __assign(__assign({}, options), { context: scopeContext }) : options;\n}\n/**\n *\n * @param root Element(s) to search from.\n * @param selector Selector to look for.\n * @param options Options for querying.\n * @param queryForSelector Query multiple levels deep for the initial selector, even if it doesn't contain a traversal.\n * @param scopeContext Optional context for a :scope.\n */\nfunction findFilterElements(root, selector, options, queryForSelector, scopeContext) {\n    var filterIndex = selector.findIndex(positionals_1.isFilter);\n    var sub = selector.slice(0, filterIndex);\n    var filter = selector[filterIndex];\n    /*\n     * Set the number of elements to retrieve.\n     * Eg. for :first, we only have to get a single element.\n     */\n    var limit = (0, positionals_1.getLimit)(filter.name, filter.data);\n    if (limit === 0)\n        return [];\n    var subOpts = addContextIfScope(sub, options, scopeContext);\n    /*\n     * Skip `findElements` call if our selector starts with a positional\n     * pseudo.\n     */\n    var elemsNoLimit = sub.length === 0 && !Array.isArray(root)\n        ? DomUtils.getChildren(root).filter(DomUtils.isTag)\n        : sub.length === 0 || (sub.length === 1 && sub[0] === SCOPE_PSEUDO)\n            ? (Array.isArray(root) ? root : [root]).filter(DomUtils.isTag)\n            : queryForSelector || sub.some(css_what_1.isTraversal)\n                ? findElements(root, [sub], subOpts, limit)\n                : filterElements(root, [sub], subOpts);\n    var elems = elemsNoLimit.slice(0, limit);\n    var result = filterByPosition(filter.name, elems, filter.data, options);\n    if (result.length === 0 || selector.length === filterIndex + 1) {\n        return result;\n    }\n    var remainingSelector = selector.slice(filterIndex + 1);\n    var remainingHasTraversal = remainingSelector.some(css_what_1.isTraversal);\n    var remainingOpts = addContextIfScope(remainingSelector, options, scopeContext);\n    if (remainingHasTraversal) {\n        /*\n         * Some types of traversals have special logic when they start a selector\n         * in css-select. If this is the case, add a universal selector in front of\n         * the selector to avoid this behavior.\n         */\n        if (specialTraversal.has(remainingSelector[0].type)) {\n            remainingSelector.unshift(UNIVERSAL_SELECTOR);\n        }\n        /*\n         * Add a scope token in front of the remaining selector,\n         * to make sure traversals don't match elements that aren't a\n         * part of the considered tree.\n         */\n        remainingSelector.unshift(SCOPE_PSEUDO);\n    }\n    /*\n     * If we have another filter, recursively call `findFilterElements`,\n     * with the `recursive` flag disabled. We only have to look for more\n     * elements when we see a traversal.\n     *\n     * Otherwise,\n     */\n    return remainingSelector.some(positionals_1.isFilter)\n        ? findFilterElements(result, remainingSelector, options, false, scopeContext)\n        : remainingHasTraversal\n            ? // Query existing elements to resolve traversal.\n                findElements(result, [remainingSelector], remainingOpts, Infinity)\n            : // If we don't have any more traversals, simply filter elements.\n                filterElements(result, [remainingSelector], remainingOpts);\n}\nfunction findElements(root, sel, options, limit) {\n    if (limit === 0)\n        return [];\n    var query = (0, css_select_1._compileToken)(sel, options, root);\n    return find(root, query, limit);\n}\nfunction find(root, query, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var elems = (0, css_select_1.prepareContext)(root, DomUtils, query.shouldTestNextSiblings);\n    return DomUtils.find(function (node) { return DomUtils.isTag(node) && query(node); }, elems, true, limit);\n}\nfunction filterElements(elements, sel, options) {\n    var els = (Array.isArray(elements) ? elements : [elements]).filter(DomUtils.isTag);\n    if (els.length === 0)\n        return els;\n    var query = (0, css_select_1._compileToken)(sel, options);\n    return els.filter(query);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}